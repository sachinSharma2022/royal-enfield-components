<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scroll Highlight Working</title>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        background: #000;
        color: #aaa;
      }

      .scroll-testimonials {
        height: auto;
        background: black
          url("https://images.unsplash.com/photo-1622185135505-2d795003994a?q=80")
          no-repeat right;
        background-size: contain;
        position: relative;
      }

      .text-list-wrapper {
        position: relative;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .text-list {
        display: flex;
        flex-direction: column;
        gap: 40px;
        will-change: transform;
      }

      .text-list p {
        font-size: 24px;
        color: #888;
        transition: all 0.3s ease;
        opacity: 0.6;
        text-align: left;
        max-width: 700px;
      }

      .text-list p.highlight {
        color: white;
        transform: scale(1.2) translateX(3vw);
        opacity: 1 !important;
      }
    </style>
  </head>
  <body>
    <section style="height: 100vh; background-color: red"></section>
    <section class="scroll-testimonials">
      <div class="text-list-wrapper">
        <div class="text-list">
          <p>One Day to ride with the world.</p>
          <p>From Argentina to Australia. Move as one with pride.</p>
          <p>Prepare your best rider look and gather your friends.</p>
          <p>Make new ones on the road.</p>
          <p>For the freedom, the passion & Pure Motorcycling.</p>
          <p>One Day to ride with the world again.</p>
          <p>From Argentina to Australia once more.</p>
        </div>
      </div>
    </section>
    <section style="height: 100vh; background-color: red"></section>

    <!-- GSAP & ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
      gsap.registerPlugin(ScrollTrigger);

      window.addEventListener("load", () => {
        const container = document.querySelector(".scroll-testimonials");
        const wrapper = document.querySelector(".text-list-wrapper");
        const list = document.querySelector(".text-list");
        const items = gsap.utils.toArray(".text-list p");

        const itemHeight = items[0].offsetHeight;
        const listHeight = list.scrollHeight;
        const windowHeight = window.innerHeight;
        const offset = windowHeight / 2 - itemHeight / 2;

        gsap.set(list, { y: offset });

        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: container,
            start: "top top",
            end: () => "+=" + (listHeight - itemHeight + offset),
            pin: true,
            scrub: 1,
            markers: true, // Remove this in production
            onUpdate: highlightCenterItem,
          },
        });

        tl.to(list, {
          y: -1 * (listHeight - itemHeight - offset),
          ease: "none",
        });

        function highlightCenterItem() {
          const center = wrapper.getBoundingClientRect().top + windowHeight / 2;

          let closest = null;
          let minDistance = Infinity;

          items.forEach((item) => {
            const rect = item.getBoundingClientRect();
            const itemCenter = rect.top + rect.height / 2;
            const dist = Math.abs(center - itemCenter);

            if (dist < minDistance) {
              minDistance = dist;
              closest = item;
            }
          });

          items.forEach((item) => item.classList.remove("highlight"));
          if (closest) closest.classList.add("highlight");
        }

        highlightCenterItem();
      });
    </script>
  </body>
</html>
